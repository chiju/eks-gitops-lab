{
  "id": null,
  "title": "AWS Cost & Billing Analytics",
  "tags": ["aws", "cost", "billing", "optimization"],
  "timezone": "browser",
  "schemaVersion": 30,
  "version": 1,
  "refresh": "5m",
  "time": {
    "from": "now-7d",
    "to": "now"
  },
  "panels": [
    {
      "id": 1,
      "title": "Daily AWS Spend Trend",
      "type": "timeseries",
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 0},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "unit": "currencyUSD"
        }
      },
      "targets": [
        {
          "datasource": "CloudWatch",
          "namespace": "AWS/Billing",
          "metricName": "EstimatedCharges",
          "dimensions": {
            "Currency": "USD"
          },
          "statistic": "Maximum",
          "period": "86400",
          "region": "us-east-1"
        }
      ]
    },
    {
      "id": 2,
      "title": "Cost by AWS Service",
      "type": "timeseries",
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 0},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "unit": "currencyUSD"
        }
      },
      "targets": [
        {
          "datasource": "CloudWatch",
          "namespace": "AWS/Billing",
          "metricName": "EstimatedCharges",
          "dimensions": {
            "Currency": "USD",
            "ServiceName": "Amazon Elastic Kubernetes Service"
          },
          "statistic": "Maximum",
          "period": "86400",
          "region": "us-east-1"
        },
        {
          "datasource": "CloudWatch",
          "namespace": "AWS/Billing",
          "metricName": "EstimatedCharges",
          "dimensions": {
            "Currency": "USD",
            "ServiceName": "Amazon Elastic Compute Cloud - Compute"
          },
          "statistic": "Maximum",
          "period": "86400",
          "region": "us-east-1"
        }
      ]
    },
    {
      "id": 3,
      "title": "EKS Control Plane API Errors",
      "type": "timeseries",
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 8},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "unit": "short"
        }
      },
      "targets": [
        {
          "datasource": "CloudWatch",
          "namespace": "AWS/EKS",
          "metricName": "cluster_failed_request_count",
          "dimensions": {
            "ClusterName": "eks-lab-argocd"
          },
          "statistic": "Sum",
          "period": "300",
          "region": "eu-central-1"
        }
      ]
    },
    {
      "id": 4,
      "title": "VPC Flow Logs - Rejected Connections",
      "type": "timeseries",
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 8},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "unit": "short"
        }
      },
      "targets": [
        {
          "datasource": "CloudWatch Logs",
          "logGroups": ["/aws/vpc/flowlogs/eks-lab-argocd"],
          "query": "fields @timestamp, srcaddr, dstaddr, action | filter action = \"REJECT\" | stats count() by bin(5m)",
          "region": "eu-central-1"
        }
      ]
    },
    {
      "id": 5,
      "title": "Data Transfer Costs (GB)",
      "type": "timeseries",
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 16},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "unit": "currencyUSD"
        }
      },
      "targets": [
        {
          "datasource": "CloudWatch",
          "namespace": "AWS/Billing",
          "metricName": "EstimatedCharges",
          "dimensions": {
            "Currency": "USD",
            "ServiceName": "Amazon Elastic Compute Cloud - Data Transfer"
          },
          "statistic": "Maximum",
          "period": "86400",
          "region": "us-east-1"
        }
      ]
    },
    {
      "id": 6,
      "title": "CloudWatch Logs Ingestion Cost",
      "type": "timeseries",
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 16},
      "fieldConfig": {
        "defaults": {
          "color": {"mode": "palette-classic"},
          "unit": "currencyUSD"
        }
      },
      "targets": [
        {
          "datasource": "CloudWatch",
          "namespace": "AWS/Billing",
          "metricName": "EstimatedCharges",
          "dimensions": {
            "Currency": "USD",
            "ServiceName": "Amazon CloudWatch Logs"
          },
          "statistic": "Maximum",
          "period": "86400",
          "region": "us-east-1"
        }
      ]
    },
    {
      "id": 7,
      "title": "EKS Control Plane Logs - Error Analysis",
      "type": "logs",
      "gridPos": {"h": 8, "w": 24, "x": 0, "y": 24},
      "targets": [
        {
          "datasource": "CloudWatch Logs",
          "logGroups": ["/aws/eks/eks-lab-argocd/cluster"],
          "query": "fields @timestamp, @message | filter @message like /ERROR/ | sort @timestamp desc | limit 20",
          "region": "eu-central-1"
        }
      ]
    },
    {
      "id": 8,
      "title": "Cost Optimization Alerts",
      "type": "text",
      "gridPos": {"h": 6, "w": 24, "x": 0, "y": 32},
      "options": {
        "content": "## ðŸ’° Cost Optimization Opportunities\n\nðŸ” **Monitor these CloudWatch-only metrics:**\n- **Billing alerts** when costs exceed thresholds\n- **Data transfer patterns** to optimize network costs  \n- **EKS control plane errors** affecting availability\n- **VPC flow logs** for security and network optimization\n- **Service-specific costs** for rightsizing decisions\n\nâš ï¸ **Set up billing alerts for:**\n- Daily spend > $10\n- Monthly projection > $200\n- Unusual service cost spikes"
      }
    }
  ]
}
